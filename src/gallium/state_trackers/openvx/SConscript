#######################################################################
# SConscript for openvx state_tracker

Import('*')

from sys import executable as python_cmd

env = env.Clone()

env.Append(CPPPATH = [
    '#/src/mapi',
    Dir('.'),
])
env.Append(CPPDEFINES = [
    'KHRONOS_DLL_EXPORTS',
])

api_tmp, = env.CodeGenerate(
        target = 'api_tmp.h',
        script = '#src/mapi/mapi_abi.py',
        source = '#src/mapi/vxapi/vxapi.csv',
        command = python_cmd + ' $SCRIPT --printer vxapi --mode app $SOURCE > $TARGET'
)

st_openvx = env.ConvenienceLibrary(
    target = 'st_openvx',
    source = env.ParseSourceList('Makefile.sources', 'C_SOURCES')
)

Export('st_openvx')
